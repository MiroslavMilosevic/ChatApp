(this["webpackJsonpmy-chatapp"]=this["webpackJsonpmy-chatapp"]||[]).push([[0],{20:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var o=a(1),s=a(0),r=a.n(s),c=a(30),n=a.n(c),i=(a(38),a(4)),l=a(2),u=a(9),d=(a(39),[{id:1,username:"milancemkc",password:"mkc"},{id:2,username:"jocara10",password:"spartacus"},{id:3,username:"pekula96",password:"kockazenepice"},{id:4,username:"suka99",password:"ooomajstore"},{id:5,username:"pero96",password:"mojpero"}]);a(20);function g(e){var t=e.usersArray,a=e.setUser,r=Object(s.useState)(""),c=Object(i.a)(r,2),n=c[0],u=c[1],d=Object(s.useState)(""),g=Object(i.a)(d,2),m=g[0],j=g[1],p=Object(l.f)();return Object(s.useEffect)((function(){}),[]),Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{className:"inputWraper",children:[Object(o.jsx)("input",{className:"inputUsername inputLogin",type:"text",placeholder:"username",value:n,onChange:function(e){u(e.target.value)}}),Object(o.jsx)("input",{className:"inputPassword inputLogin",type:"password",placeholder:"password",value:m,onChange:function(e){j(e.target.value)}})]}),Object(o.jsx)("button",{className:"ulogujSeBtn",onClick:function(){console.log(n,m);var e=!1;t.forEach((function(t){t.username===n.trim()&&t.password===m.trim()&&(console.log("uspesno"),e=!0,localStorage.setItem("id",t.id.toString()),localStorage.setItem("username",t.username),localStorage.setItem("password",t.password),localStorage.setItem("isLoged","true"),a({id:localStorage.getItem("id"),username:localStorage.getItem("username"),password:localStorage.getItem("password"),isLoged:!0}),setTimeout((function(){p.push("home")}),150))})),e||(console.log("neuspesno"),alert("Uneti username ili password nisu ispravni"))},children:"Uloguj se"}),Object(o.jsx)("button",{className:"noneDisplay",onClick:function(){localStorage.setItem("username",null),localStorage.setItem("password",null),localStorage.setItem("id",null),localStorage.setItem("isLoged",null),a({id:localStorage.getItem("id"),username:localStorage.getItem("username"),password:localStorage.getItem("password"),isLoged:null})},children:"Set to null"})]})}var m=a(63);function j(e){var t=e.setUser,a=Object(l.f)();return Object(o.jsx)("div",{children:Object(o.jsx)("button",{className:"logOutBtn",onClick:function(){localStorage.setItem("username",null),localStorage.setItem("password",null),localStorage.setItem("id",null),localStorage.setItem("isLoged",null),t({id:null,username:null,password:null,isLoged:null}),a.push("/login")},children:"LogOut"})})}function p(e){var t=e.usersArray,a=e.setUser;return Object(s.useEffect)((function(){a({id:localStorage.getItem("id"),username:localStorage.getItem("username"),password:localStorage.getItem("password"),isLoged:localStorage.getItem("isLoged")})}),[]),Object(o.jsxs)("div",{className:"homeWraper",children:[Object(o.jsx)(j,{setUser:a}),Object(o.jsx)("h1",{children:"Home"}),Object(o.jsxs)(o.Fragment,{children:[" ",Object(o.jsx)("button",{className:"noneDisplay",onClick:function(){console.log(localStorage.getItem("isLoged"))},children:"DUGME"}),Object(o.jsx)("div",{className:"homeSpanWraper",children:t.filter((function(e){return e.id!==Number(localStorage.getItem("id"))})).map((function(e){return Object(o.jsxs)("span",{className:"chatsHomeSpan",children:["Idi na Chat sa: ",Object(o.jsx)(u.b,{to:"chat/".concat(e.id),children:e.username},Object(m.a)())," "]},Object(m.a)())}))})," "]})]})}var b=a(14),O=a(11),h=a.n(O),f=function(e){return h.a.get("https://script.google.com/macros/s/AKfycbyaPSgO1KOnrE1vPswfyrByQwhcMtJH5t8VfErd_pc3viSAkU4/exec?id=".concat(e+1))},S=function(e,t){return h.a.post("https://script.google.com/macros/s/AKfycbySS5xyOi8U9KApKftx72Hm5Uy0FcOt3mG6zWKKQ-Ti9OBIhj8/exec?id=".concat(e,"&broj=").concat(t))};function v(e){return e.length<=200&&e.length>0&&!e.includes(";")?[!0,"poruka odgovara formatu"]:e.length>200?[!1,"poruka ima preko 200 karaktera "]:e.length<=0?[!1,"ne mozete poslati praznu poruku"]:e.includes(";")?[!1,"zabranjeno je koristiti neki od karatera iz vase poruke"]:void 0}function x(e){var t=e.setUserApp,a=Object(s.useState)(Object(l.g)().id),r=Object(i.a)(a,1)[0],c=Object(s.useState)({id:localStorage.getItem("id"),username:localStorage.getItem("username"),password:localStorage.getItem("password"),isLoged:localStorage.getItem("isLoged")}),n=Object(i.a)(c,1)[0],u=Object(s.useState)([]),g=Object(i.a)(u,2),p=g[0],O=g[1],x=Object(s.useState)([]),I=Object(i.a)(x,2),w=I[0],k=I[1],y=Object(s.useState)([]),N=Object(i.a)(y,2),U=N[0],L=N[1],D=Object(s.useState)(""),E=Object(i.a)(D,2),P=E[0],A=E[1],K=Object(s.useState)(""),B=Object(i.a)(K,2),C=B[0],W=B[1];window.onbeforeunload=function(){S(n.id,Number(localStorage.getItem("redZaUpis")))},Object(s.useEffect)((function(){setTimeout((function(){var e=document.getElementById("scrollDiv");e.scrollTop=e.scrollHeight,console.log("scrool")}),2e3),W(d.find((function(e){return e.id===Number(r)})).username),function(e){return h.a.get("https://script.google.com/macros/s/AKfycbySS5xyOi8U9KApKftx72Hm5Uy0FcOt3mG6zWKKQ-Ti9OBIhj8/exec?id=".concat(e))}(n.id).then((function(e){console.log(e.data),localStorage.setItem("redZaUpis",e.data)})),f(Number(r)).then((function(e){var t=e.data.map((function(e){return{id:e.split(";")[0],idPoslao:e.split(";")[1],poruka:e.split(";")[2],date:Date.parse(e.split(";")[3]),stringDate:e.split(";")[3]}}));k(t)})),f(Number(n.id)).then((function(e){var t=e.data.map((function(e){return{id:e.split(";")[0],idPoslao:e.split(";")[1],poruka:e.split(";")[2],date:Date.parse(e.split(";")[3]),stringDate:e.split(";")[3]}}));console.log(t),O(t)}));var e=setInterval((function(){f(Number(r)).then((function(e){var t=e.data.map((function(e){return{id:e.split(";")[0],idPoslao:e.split(";")[1],poruka:e.split(";")[2],date:Date.parse(e.split(";")[3]),stringDate:e.split(";")[3]}}));k(t)}))}),2e3);return function(){clearInterval(e),console.log("odjavaaaaaaaaaa"+localStorage.getItem("redZaUpis")),S(n.id,Number(localStorage.getItem("redZaUpis")))}}),[]),Object(s.useEffect)((function(){var e=[];e=n.id!==r?[].concat(Object(b.a)(w.filter((function(e){return e.idPoslao===n.id}))),Object(b.a)(p.filter((function(e){return e.idPoslao===r})))):Object(b.a)(p.filter((function(e){return e.idPoslao===n.id}))),L(e),console.log(U)}),[w,p]),Object(s.useEffect)((function(){var e=document.getElementById("scrollDiv");e.scrollTop=e.scrollHeight,console.log("scrool")}),[p]);var Z=function(){if(v(P)[0]&&Number(localStorage.getItem("redZaUpis"))<150){!function(e,t,a,o){h.a.post("https://script.google.com/macros/s/AKfycbyaPSgO1KOnrE1vPswfyrByQwhcMtJH5t8VfErd_pc3viSAkU4/exec?poruka=".concat(e,"&id=").concat(t,"&idPoslao=").concat(a,"&redZaUpis=").concat(o))}(P,n.id,r,localStorage.getItem("redZaUpis")),localStorage.setItem("redZaUpis",Number(localStorage.getItem("redZaUpis"))+1);var e=Object(b.a)(p);e.push({id:n.id,idPoslao:r,poruka:P,date:Date.parse((new Date).toString()),stringDate:(new Date).toString()}),console.log(localStorage.getItem("redZaUpis")+"ovo red za upis"),O(e),A("")}else alert(v(P)[1])};return Object(o.jsxs)("div",{className:"bigChatWraper",children:[Object(o.jsx)("button",{className:"noneDisplay",onClick:function(){console.log(localStorage.getItem("redZaUpis"))},children:"DUGME"}),Object(o.jsx)(j,{setUser:t}),Object(o.jsx)("h1",{children:"Chat sa korisnikom: "}),Object(o.jsx)("h2",{children:C}),Object(o.jsx)("input",{className:"porukaInput",type:"text",value:P,placeholder:"poruka...",onChange:function(e){A(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&Z()}}),Object(o.jsx)("div",{className:"chatWraper",id:"scrollDiv",children:U.sort((function(e,t){return e.date-t.date})).map((function(e){return e.id===n.id?Object(o.jsxs)("div",{className:"mojaPorukaDiv",children:[Object(o.jsx)("div",{className:"mojSpan",children:e.poruka},Object(m.a)()),Object(o.jsx)("div",{className:"divBtn noneDisplay",children:Object(o.jsx)("button",{className:"obrisiBtn",children:"Obrisi"})})]},Object(m.a)()):Object(o.jsx)("div",{className:"njegovaPorukaDiv",children:Object(o.jsx)("div",{className:"njegovSpan",children:e.poruka},Object(m.a)())},Object(m.a)())}))})]})}function I(){var e=Object(l.f)();return Object(o.jsx)("button",{className:"goToLoginBtn",onClick:function(){setTimeout((function(){e.push("login")}),150)},children:"Idi na Login Stranicu"})}var w=function(){var e=Object(s.useState)([]),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(s.useState)({id:localStorage.getItem("id"),username:localStorage.getItem("username"),password:localStorage.getItem("password"),isLoged:localStorage.getItem("isLoged")}),n=Object(i.a)(c,2),m=n[0],j=n[1];return Object(s.useEffect)((function(){j({id:localStorage.getItem("id"),username:localStorage.getItem("username"),password:localStorage.getItem("password"),isLoged:localStorage.getItem("isLoged")}),r(d)}),[]),Object(o.jsx)("div",{className:"App",children:Object(o.jsx)(u.a,{children:Object(o.jsxs)(l.c,{children:[Object(o.jsx)(l.a,{exact:!0,path:"/home",children:"null"!==m.isLoged&&null!==m.isLoged?Object(o.jsx)(p,{usersArray:a,setUser:j}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("p",{className:"nisiUlogovanParagraf",children:"nisi ulogovan"}),Object(o.jsx)(I,{})]})}),Object(o.jsx)(l.a,{exact:!0,path:"/",children:Object(o.jsxs)("div",{className:"loginWraper",children:[Object(o.jsx)("h1",{className:"loginHeder",children:"Login"}),Object(o.jsx)(g,{usersArray:a,setUser:j})]})}),Object(o.jsx)(l.a,{exact:!0,path:"/login",children:Object(o.jsxs)("div",{className:"loginWraper",children:[Object(o.jsx)("h1",{className:"loginHeder",children:"Login"}),Object(o.jsx)(g,{usersArray:a,setUser:j})]})}),Object(o.jsx)(l.a,{exact:!0,path:"/register",children:Object(o.jsx)("h1",{children:"register"})}),Object(o.jsx)(l.a,{exact:!0,path:"/chat/:id",children:"null"!==m.isLoged&&null!==m.isLoged?Object(o.jsx)(x,{setUserApp:j}):Object(o.jsx)("p",{children:"nisi ulogovan"})})]})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(w,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[62,1,2]]]);
//# sourceMappingURL=main.91cb4534.chunk.js.map